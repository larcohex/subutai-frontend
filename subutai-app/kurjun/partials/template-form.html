<div class="b-popup b-popup_middle">
	<div class="b-popup__header">
		<span>Add template</span>
		<a href ng-click="closeThisDialog()">
			<img src="assets/elements/buttons/b-icon-close.svg" class="b-icon g-right"/>
		</a>
	</div>
	<form ng-submit="kurjunViewCtrl.proceedTemplate(kurjunViewCtrl.currentTemplate); processing=true">
		<div class="b-popup__body">

			<div class="popup-body-box">
				<label class="b-popup-body-label">Repository</label>
				<select ng-init=""
						class="b-popup-body-input b-popup-body-input_box"
						ng-change="kurjunViewCtrl.checkRepositoryStatus(kurjunViewCtrl.currentTemplate.repository)"
						ng-model="kurjunViewCtrl.currentTemplate.repository"
						ng-options="repository for repository in kurjunViewCtrl.repositories">
				</select>
				<div class="clear"></div>
			</div>

			<div class="popup-body-box">
				<label class="b-popup-body-label">Template upload</label>
				<div class="b-file-uploader">
					<div class="fileUpload b-btn b-btn_light-grey">
						<span>Upload archive</span>
						<input id="js-uploadBtn"
							   type="file"
							   class="upload"
							   ngf-select
							   ng-model="kurjunViewCtrl.currentTemplate.file"
							   ng-disabled="!kurjunViewCtrl.isUploadAllowed"
							   required/>
					</div>
					<input id="js-uploadFile"
						   class="b-form-input b-form-input_fix-size-1"
						   placeholder="{{ kurjunViewCtrl.currentTemplate.file.name ? kurjunViewCtrl.currentTemplate.file.name :  'Choose File' }}"
						   disabled="disabled" />
				</div>
				<div class="b-progress" ng-style="processing ? {'display':'block'} : {'display':'none'}">
					<div class="b-progress-bar" ng-style="{'width': kurjunViewCtrl.currentTemplate.file.progress + '%'}">
						{{ kurjunViewCtrl.currentTemplate.file.progress }}%
					</div>
				</div>
				<div class="clear"></div>
			</div>

		</div>
		<div class="b-popup__footer">
			<button
					class="b-btn b-btn_green g-right"
					type="submit"
					id="subt_button__environment-add-domain"
					ng-disabled="!kurjunViewCtrl.currentTemplate.repository || !kurjunViewCtrl.isUploadAllowed">
				Add
			</button>
			<div class="clear"></div>
		</div>
	</form>
</div>
