<div class="row wrapper border-bottom white-bg page-heading">
	<div class="col-md-9">
		<h2>Tracker</h2>
		<ol class="breadcrumb">
			<li>
			<a href="index.html">Home</a>
			</li>
			<li class="active">
			<strong>Tracker</strong>
			</li>
		</ol>
	</div>
</div>
<div class="panel-body trackerWrapper" ng-controller="TrackerCtrl as trackerCtrl">
	<div class="row">
		<div class="col-md-12 moduleFilters">
			<div class="ibox float-e-margins animated fadeInLeft">
				<div class="ibox-title">
					<h5>Choose module <small>to see operations list</small></h5>
					<div class="ibox-tools">
						<a class="collapse-link">
							<i class="fa fa-chevron-up"></i>
						</a>
						<a class="dropdown-toggle" data-toggle="dropdown" href="#">
							<i class="fa fa-wrench"></i>
						</a>
						<ul class="dropdown-menu dropdown-user">
							<li><a href="#">Config option 1</a>
							</li>
							<li><a href="#">Config option 2</a>
							</li>
						</ul>
						<a class="close-link">
							<i class="fa fa-times"></i>
						</a>
					</div>
				</div>
				<div class="ibox-content">
					<form action="" method="" name="">
						<div class="col-md-4">
							Source
							<select class="form-control m-b"
								ng-change="trackerCtrl.loadOperations()"
								ng-model="trackerCtrl.selectedModule">
								<option ng-repeat="module in trackerCtrl.modules" value="{{ module }}">
									{{ module }}
								</option>
							</select>
						</div>
						<div class="col-md-4">
							From
							<input type="date" ng-model="trackerCtrl.startDate" ng-change="trackerCtrl.loadOperations()" id="start" class="form-control m-b">
						</div>
						<div class="col-md-4">
							To
							<input type="date" ng-model="trackerCtrl.endDate" ng-change="trackerCtrl.loadOperations()" id="end" class="form-control m-b">
						</div>
					</form>
				</div>
			</div>

		</div>

		<div class="col-md-12">
			<div class="ibox float-e-margins animated fadeInRight">
				<div class="ibox-title">
					<h5>Selected module operations <small>list</small></h5>
					<div class="ibox-tools">
						<a class="collapse-link">
							<i class="fa fa-chevron-up"></i>
						</a>
						<a class="dropdown-toggle" data-toggle="dropdown" href="#">
							<i class="fa fa-wrench"></i>
						</a>
						<ul class="dropdown-menu dropdown-user">
							<li>
								<a href="#">Config option 1</a>
							</li>
							<li>
								<a href="#">Config option 2</a>
							</li>
						</ul>
						<a class="close-link">
							<i class="fa fa-times"></i>
						</a>
					</div>
				</div>
				<div class="ibox-content">
					<table id="operationsTable" datatable="" class="table table-striped table-bordered table-hover">
						<thead>
							<tr>
								<th>Date</th>
								<th>Operation</th>
								<th>Status</th>
								<th>Logs</th>
							</tr>
						</thead>
						<tbody>
						<!--<tr ng-repeat="operation in trackerCtrl.operations | dateRange: trackerCtrl.startDate : trackerCtrl.endDate" repeat-done="initDataTable">-->
						<tr ng-repeat="operation in trackerCtrl.operations" repeat-done="initDataTable">
							<td>{{operation.createDate | toStringFilter}}</td>
							<td>{{operation.description}}</td>
							<td>{{operation.state}}</td>
							<td>
								<button class="btn btn-primary"
									ng-click="trackerCtrl.viewLogs(operation.id)"
									data-toggle="modal"
									data-target="#logsModal">
									View logs
								</button>
							</td>
						</tr>
						</tbody>
					</table>
				</div>
			</div>

		</div>
	</div>

	<div class="modal fade" id="logsModal">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title">Chosen module logs</h4>
				</div>
				<div class="modal-body">
					<div id="logsContainer" class="mCustomScrollbar" data-mcs-theme="dark">
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
				</div>
			</div><!-- /.modal-content -->
		</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->	

</div>

<!--Filter function template-->

<!--<script type="text/javascript">-->
<!--$.fn.dataTable.ext.search.push(-->
<!--function( settings, data, dataIndex ) {-->
<!--var min = parseInt( $('#min').val(), 10 );-->
<!--var max = parseInt( $('#max').val(), 10 );-->
<!--var age = parseFloat( data[3] ) || 0; // use data for the age column-->

<!--if ( ( isNaN( min ) && isNaN( max ) ) ||-->
<!--( isNaN( min ) && age <= max ) ||-->
<!--( min <= age   && isNaN( max ) ) ||-->
<!--( min <= age   && age <= max ) )-->
<!--{-->
<!--return true;-->
<!--}-->
<!--return false;-->
<!--}-->
<!--);-->

<!--$(document).ready(function() {-->
<!--var table = $('#example').DataTable();-->

<!--$('#min, #max').keyup( function() {-->
<!--table.draw();-->
<!--} );-->
<!--} );-->
<!--</script>-->
