<div class="b-popup" ng-show = "integratorCtrl.step === 'upload'">
	<div class="b-popup__header">
		Upload new plugin
		<a href ng-click="closeThisDialog()"><img src="assets/elements/buttons/b-icon-close.svg" class="b-icon g-right"/></a>
	</div>
	<div class="b-popup__body">
		<div class="b-form">
			<div class="b-form__wrapper b-form__wrapper_margin-bottom">

				<div class="popup-body-box">
					<label class="b-popup-body-label">Name</label>

					<input type="text" 
						placeholder="Enter plugin name" 
						class="b-popup-body-input b-popup-body-input_box" 
						ng-model="integratorCtrl.newPlugin.name" required>
					<div class="clear"></div>
				</div>

				<div class="popup-body-box">
					<label class="b-popup-body-label">Version</label>

					<input type="text" 
						placeholder="Enter plugin name" 
						class="b-popup-body-input b-popup-body-input_box" 
						ng-model="integratorCtrl.newPlugin.version" required>
					<div class="clear"></div>
				</div>

				<div style = "height: 26px">
					<div class="b-file-uploader" style = "float: left">
						<div class="fileUpload b-btn b-btn_light-grey" style = "width: 82px">
							<span>Upload</span>
							<input type="file" class="upload" file-model = "upload"/>
						</div>
					</div>
					<div style = "float: left; display: inline">
						<input class="b-form-input b-form-input_full" type = "text" id = "filename" style = "color: #04346E; font-family: 'Ubuntu', sans-serif; font-size: 13px;" value = "Choose file" readonly></label>
					</div>
				</div>
				<div class="clear"></div>
				<div>
					<a href class="b-btn b-btn_blue g-left  b-btn_margin-l" ng-click="integratorCtrl.editPermissionsWindow(integratorCtrl.newPlugin, true)" style="margin-bottom: 10px; margin-top: 10px">Next</a>
				</div>
			</div>
		</div>
	</div>
</div>



<div class="b-popup b-popup_wide" ng-show = "integratorCtrl.step === 'perms'">
	<div class="b-popup__header">
		<span ng-show = "!integratorCtrl.isNew">Edit permissions</span>
		<span ng-show = "integratorCtrl.isNew">Set permissions</span>
		<a href ng-click="closeThisDialog()">
			<img src="assets/elements/buttons/b-icon-close.svg" class="b-icon g-right"/>
		</a>
	</div>
	<form class="form-horizontal">

		<div class="b-popup__header">
			<input type="text"
				   class="b-popup-body-input b-popup-body-input_role"
				   ng-model="integratorCtrl.currentPlugin.name" style = "color: #04346E"
				   required readonly ng-show = "!integratorCtrl.isNew">
			<input type="text"
				   class="b-popup-body-input b-popup-body-input_role"
				   ng-model="integratorCtrl.newPlugin.name" style = "color: #04346E"
				   required readonly ng-show = "integratorCtrl.isNew">
		</div>

		<div class="b-popup__body">
			<div class="b-popup-body b-popup-body_role b-nav_left">
				<div class="b-popup-body-list-title ">All roles</div>
				<div class="b-main-table-border">
					<table class="b-main-table b-main-table_with-header b-main-table_white-header">
						<tr>
							<th>Name</th>
							<th></th>
						</tr>
						<tr ng-repeat="permission in integratorCtrl.permissions">
							<td class="b-main-table__name">{{permission.name}}</td>
							<td>
								<a href
								   class="b-btn-circle b-btn_green"
								   ng-click="integratorCtrl.addPermission2Stack(permission)">
									<i class="fa fa-plus"></i>
								</a>
							</td>
						</tr>
					</table>
				</div>
			</div>
			<div class="b-popup-body b-popup-body_role-100">
				<div class="b-popup-body-list-title ">Role permissions</div>
				<div class="b-main-table-border">
					<table class="b-main-table b-main-table_with-header b-main-table_white-header">
						<tr>
							<th>Name</th>
							<th>Read</th>
							<th>Write</th>
							<th>Update</th>
							<th>Delete</th>
							<th></th>
						</tr>
						<tr ng-repeat="(key, permission) in integratorCtrl.permissions2Add">
							<td class="b-main-table__name">{{permission.name}}</td>
							<td class="b-main-table__checkbox">
								<input type="checkbox" ng-model="permission.read">
							</td>
							<td class="b-main-table__checkbox">
								<input type="checkbox" ng-model="permission.write">
							</td>
							<td class="b-main-table__checkbox">
								<input type="checkbox" ng-model="permission.update">
							</td>
							<td class="b-main-table__checkbox">
								<input type="checkbox" ng-model="permission.delete">
							</td>
							<td class="b-main-table__checkbox">
								<a href
								   class="b-btn-circle b-btn_red"
								   ng-click="integratorCtrl.removePermissionFromStack(key)">
									<i class="fa fa-times"></i>
								</a>
							</td>
						</tr>
					</table>
				</div>
			</div>
			<div class="clear"></div>
		</div>
		<div class="b-popup__footer">
			<button class="b-btn b-btn_blue g-right" ng-click = "integratorCtrl.editPermissions()" ng-show = "!integratorCtrl.isNew">Save</button>
			<button class="b-btn b-btn_blue g-left" ng-click = "integratorCtrl.step = 'upload'" ng-show = "integratorCtrl.isNew">Back</button>
			<button class="b-btn b-btn_green g-right" ng-click = "integratorCtrl.uploadPlugin()" ng-show = "integratorCtrl.isNew">Upload</button>
			<div class="clear"></div>
		</div>
	</form>
</div>
